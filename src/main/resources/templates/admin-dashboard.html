<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Admin RH Dashboard</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light">
	<nav class="navbar navbar-expand-lg navbar-dark bg-danger py-3">
		<div class="container">
			<span class="navbar-text fw-bold fs-5 me-auto" th:text="${admin.prenom + ' ' + admin.nom}">Admin RH</span>
			<a class="navbar-brand fw-bold mx-auto flex-fill text-center" href="/">üè¢ Admin RH</a>
			<a href="/admin/logout" class="btn btn-outline-light">D√©connexion</a>
		</div>
	</nav>

	<div class="container-fluid mt-4 px-4">
		<div class="row">
			<!-- VALIDATION EMPLOYES -->
			<div class="col-lg-8 mb-4">
				<div class="card shadow-lg border-0">
					<div class="card-header bg-success text-white py-3">
						<h5 class="mb-0 fw-bold"><i class="bi bi-check-circle me-2"></i>Validation Employ√©s</h5>
					</div>
					<div class="card-body p-0">
						<div th:each="user : ${pendingUsers}" class="border-bottom p-4">
							<div class="d-flex align-items-center">
								<i class="bi bi-person-circle fs-3 text-primary me-3"></i>
								<div class="flex-grow-1">
									<h6 class="mb-1" th:text="${user.prenom + ' ' + user.nom}">Nom</h6>
									<p class="mb-1 small text-muted" th:text="${user.email}">email@entreprise.com</p>
									<p class="mb-0 small" th:text="${user.poste}">Poste</p>
								</div>
								<div class="dropdown">
									<button class="btn btn-outline-success dropdown-toggle" data-bs-toggle="dropdown">
										Valider
									</button>
									<ul class="dropdown-menu">
										<li th:each="dept : ${departments}">
											<form
												th:action="@{/admin/validate/{userId}/{deptId}(userId=${user.id}, deptId=${dept.id})}"
												method="post" style="display: inline;">
												<button type="submit" class="dropdown-item"
													th:text="${dept.nom}">[[${dept.nom}]]</button>
											</form>
										</li>
									</ul>
								</div>
							</div>
						</div>
						<div th:if="${#lists.isEmpty(pendingUsers)}" class="text-center p-5 text-muted">
							<i class="bi bi-check-all fs-1 mb-3"></i>
							<h5>Aucun employ√© en attente</h5>
						</div>
					</div>
				</div>
			</div>

			<!-- PUBLICATION ANNONCES -->
			<div class="col-lg-4 mb-4">
				<div class="card shadow-lg border-0 h-100">
					<div class="card-header bg-primary text-white py-3">
						<h6 class="mb-0 fw-bold"><i class="bi bi-megaphone me-2"></i>Nouvelle Annonce</h6>
					</div>
					<div class="card-body">
						<form th:action="@{/admin/announce}" method="post">
							<div class="mb-3">
								<input type="text" name="titre" class="form-control" placeholder="Titre annonce"
									required>
							</div>
							<div class="mb-3">
								<textarea name="contenu" class="form-control" rows="3" placeholder="Contenu..."
									required></textarea>
							</div>
							<div class="mb-3">
								<select name="departmentId" class="form-select">
									<option value="">Tous d√©partements</option>
									<option th:each="dept : ${departments}" th:value="${dept.id}" th:text="${dept.nom}">
										D√©partement</option>
								</select>
							</div>
							<button type="submit" class="btn btn-primary w-100">üì¢ Publier</button>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- ANCIENNES ANNONCES -->
		<div class="row">
			<div class="col-12">
				<h5 class="fw-bold mb-3">üì¢ Annonces r√©centes</h5>
				<div th:each="annonce : ${annonces}" class="card shadow-sm mb-2">
					<div class="card-body p-3">
						<div class="d-flex justify-content-between">
							<h6 class="mb-1" th:text="${annonce.titre}">Annonce</h6>
							<span class="badge bg-secondary" th:text="${annonce.auteur}">RH</span>
						</div>
						<p class="small mb-1" th:text="${annonce.contenu}">Contenu</p>
						<small class="text-muted"
							th:text="${#temporals.format(annonce.datePublication, 'dd/MM HH:mm')}">25/12</small>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>