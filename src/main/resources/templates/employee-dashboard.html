<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Dashboard Employ√©</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light">
	<!-- NAVBAR -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary py-3">
		<div class="container">
			<span class="navbar-text fw-bold fs-5 me-auto" th:text="${user.prenom + ' ' + user.nom}">Jean DUPONT</span>
			<a class="navbar-brand fw-bold mx-auto flex-fill text-center" href="/">üè¢ R√©seau Entreprise</a>
			<div class="d-flex">
				<a th:href="@{/employee/dashboard}" class="btn btn-outline-light btn-lg px-4 me-2 shadow">
					<i class="bi bi-house-door me-2"></i>Dashboard
				</a>
				<a th:href="@{/employee/messages}" class="btn btn-outline-light btn-lg px-4 me-2 shadow">
					<i class="bi bi-chat-dots me-2"></i>
					<span th:if="${nonLusCount > 0}" class="badge bg-danger ms-1" th:text="${nonLusCount}">3</span>
					Messagerie
				</a>
				<a th:href="@{/employee/profile}" class="btn btn-outline-light btn-lg px-4 shadow">
					<i class="bi bi-person me-2"></i>Profil
				</a>
				<a th:href="@{/employee/logout}" class="btn btn-outline-light btn-lg px-4 shadow ms-2">
					<i class="bi bi-box-arrow-right me-2"></i>D√©connexion
				</a>
			</div>
		</div>
	</nav>

	<div class="container-fluid mt-4 px-4">
		<!-- STATS MESSAGERIE -->
		<div class="row mb-4">
			<div class="col-lg-3">
				<div class="card shadow-lg border-0 h-100 text-center bg-primary text-white">
					<div class="card-body p-4">
						<i class="bi bi-chat-dots-fill fs-1 mb-3"></i>
						<h2 class="fw-bold mb-1" th:text="${nonLusCount}">0</h2>
						<p class="mb-3">Messages non lus</p>
						<a th:href="@{/employee/messages}" class="btn btn-light">Voir messages</a>
					</div>
				</div>
			</div>
		</div>

		<!-- ANNONCES RH R√âELLES -->
		<div class="row mb-4">
			<div class="col-12">
				<div class="card shadow-lg border-0">
					<div class="card-header bg-warning text-dark py-3">
						<h5 class="mb-0 fw-bold"><i class="bi bi-megaphone me-2"></i>Annonces RH <span
								class="badge bg-light text-dark ms-2" th:text="${#lists.size(annonces)}">3</span></h5>
					</div>
					<div class="card-body p-0">
						<div th:each="annonce : ${annonces}" class="border-bottom p-4 hover-bg-light">
							<div class="d-flex align-items-start">
								<div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3"
									style="width: 40px; height: 40px;">
									<i class="bi bi-megaphone fs-6"></i>
								</div>
								<div class="flex-grow-1">
									<h6 class="mb-1 fw-bold" th:text="${annonce.titre}">Annonce RH</h6>
									<p class="mb-1 small text-muted" th:text="${annonce.contenu}">Contenu annonce...</p>
									<div class="small text-muted">
										<span th:text="${annonce.auteur}">RH Team</span> ‚Ä¢
										<span
											th:text="${#temporals.format(annonce.datePublication, 'dd/MM HH:mm')}">25/12
											17:00</span>
										<span th:if="${annonce.department}" class="badge bg-primary ms-2"
											th:text="${annonce.department.nom}">Tous</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ‚úÖ D√âPARTEMENTS SANS RH (3 seulement) -->
		<div class="row">
			<div th:each="dept : ${departments}" th:if="${dept.nom != 'RH'}" class="col-md-6 col-lg-4 mb-3">
				<a th:href="@{/employee/department/{id}(id=${dept.id})}"
					class="card border-0 shadow-sm h-100 text-decoration-none text-dark hover-shadow-lg">
					<div class="card-body text-center p-4">
						<div class="bg-info text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center"
							style="width: 60px; height: 60px;">
							<i class="bi bi-building fs-4"></i>
						</div>
						<h6 class="fw-bold mb-1" th:text="${dept.nom}">D√©partement</h6>
						<p class="text-muted small mb-0" th:text="${deptEmployeeCount[dept.id] + ' employ√©(s)'}">X
							employ√©s</p>
					</div>
				</a>
			</div>
		</div>
	</div>

	<style>
		.hover-bg-light:hover {
			background-color: #f8f9fa !important;
			transition: all 0.2s;
		}

		.hover-shadow-lg:hover {
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2) !important;
			transition: all 0.3s;
		}
	</style>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>